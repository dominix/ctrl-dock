<?phpheader('Content-Type:text/xml');echo "<?xml version=\"1.0\" encoding=\"UTF-8\"?>";// This API is list all the hosts by the software installed// oa_list_hosts_by_sw.php?key=abcd&title=Microsoft Office Enterprise 2007function invalid(){	echo "<node>";		echo "<count>invalid</count>";	echo "</node>";	die(0);}function showxml($result, $num_rows){	if($num_rows>0){		while($row = mysql_fetch_array($result)){					echo "<host>";				echo "<hostname>".$row['hostname']."</hostname>";				echo "<system_id>".$row['system_id']."</system_id>";				echo "<os>".$row['man_os_name']."</os>";				$last_seen=$row['last_seen'];				$last_seen=$last_seen+0;				echo "<last_seen>".$last_seen."</last_seen>";			echo "</host>";		}	}}// include config file, also contains the API KEYrequire_once('../include/config.php');require_once('../include/dboa.php');$api_key		= strip_tags($_REQUEST['key']);$num_rows		= '';// validate api keyif($api_key!=$API_KEY || $api_key==''){	invalid();}else{	echo "<node>";	$sql = "SELECT hostname,system_id,man_os_name,UNIX_TIMESTAMP(last_seen) as last_seen FROM system where hostname IS NOT NULL and hostname!='' and man_type='computer' order by hostname";	mysql_query("SET NAMES `utf8`");	$result = mysql_query($sql);			$num_rows = mysql_num_rows($result);	showxml($result,$num_rows);	echo "</node>";}?>